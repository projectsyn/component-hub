<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Parameters :: Commodore Hub</title>
    <link rel="canonical" href="https://hub.syn.tools/openshift4-local-storage/references/parameters.html">
    <link rel="prev" href="../index.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-54393406-10"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-54393406-10')</script>
    <script>var uiRootPath = '../../_'</script>
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/7105834.js"></script>
<link rel="apple-touch-icon" sizes="180x180" href="/_/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/_/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/_/img/favicon-16x16.png">
<link rel="mask-icon" href="/_/img/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <div class="syn_logo"></div>
        <a href="https://hub.syn.tools">Commodore Hub
          </a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Tools</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://syn.tools/commodore/">Commodore</a>
            <a class="navbar-item" href="https://hub.syn.tools/" target="_blank" >Commodore Components Hub</a>
            <a class="navbar-item" href="https://syn.tools/lieutenant-api/">Lieutenant API</a>
            <a class="navbar-item" href="https://syn.tools/lieutenant-operator/">Lieutenant Operator</a>
            <a class="navbar-item" href="https://syn.tools/steward/">Steward</a>
            <a class="navbar-item" href="https://k8up.io/" target="_blank">K8up</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">
            <div class="vshn-unified-logo"></div>
          </a>
          <div class="navbar-dropdown">
            <a class="navbar-item" target="_blank" href="https://www.vshn.ch/">Main website</a>
            <a class="navbar-item" target="_blank" href="https://handbook.vshn.ch/">Handbook</a>
            <a class="navbar-item" target="_blank" href="https://kb.vshn.ch/">Knowledge Base</a>
            <a class="navbar-item" target="_blank" href="https://products.docs.vshn.ch/">Products</a>
            <a class="navbar-item" target="_blank" href="https://legal.docs.vshn.ch/">Legal</a>
            <a class="navbar-item" target="_blank" href="https://control.docs.vshn.ch/">Portal Help</a>
            <a class="navbar-item" target="_blank" href="https://docs.appuio.ch/">APPUiO Documentation</a>
          </div>
        </div>
        <div class="navbar-item">
          <div class="search-field">
            <input id="search-input" class="search-input" type="search" placeholder="Search">
            <button type="submit" class="search-button">
              <i class="fa fa-search"></i>
            </button>
          </div>
        </div>
        <div class="navbar-item">
          <a class="navbar-item" href="https://github.com/projectsyn/" target="_blank"><i
              class="fa fa-github" style="font-size: 30px;"></i>&nbsp;
            GitHub</a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="openshift4-local-storage" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">openshift4-local-storage</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="parameters.html">Parameters</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">openshift4-local-storage</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../alerts-exporter/index.html">alerts-exporter</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../alerts-exporter/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../driver-amdgpu/index.html">AMD GPU Driver</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../driver-amdgpu/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../appcat/index.html">appcat</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../appcat/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../appuio-cloud/index.html">appuio-cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../appuio-cloud/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../appuio-cloud-reporting/index.html">appuio-cloud-reporting</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../appuio-cloud-reporting/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../appuio-reporting/index.html">appuio-reporting</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../appuio-reporting/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../argocd/index.html">Argo CD</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../argocd/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../backup-k8up/index.html">backup-k8up</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../backup-k8up/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cert-exporter/index.html">cert-exporter</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cert-exporter/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cert-manager/index.html">cert-manager</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cert-manager/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cilium/index.html">Cilium</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cilium/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cloud-portal/index.html">cloud-portal</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cloud-portal/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cloudscale-cloud-controller-manager/index.html">cloudscale-cloud-controller-manager</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cloudscale-cloud-controller-manager/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cluster-backup/index.html">Cluster Backup</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cluster-backup/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cm-hetznercloud/index.html">CM Hetznercloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cm-hetznercloud/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cockroach-operator/index.html">CockroachDB Operator</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cockroach-operator/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../hub/index.html">Commodore Hub</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hub/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../crossplane/index.html">crossplane</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../crossplane/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../csi-hetznercloud/index.html">CSI Hetznercloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../csi-hetznercloud/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../csi-cloudscale/index.html">csi-cloudscale</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../csi-cloudscale/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../emergency-credentials-controller/index.html">emergency-credentials-controller</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../emergency-credentials-controller/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../espejo/index.html">espejo</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../espejo/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../etcd/index.html">etcd</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../etcd/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../eventrouter/index.html">eventrouter</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../eventrouter/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../fluentbit/index.html">fluentbit</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../fluentbit/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../gitlab-runner/main/index.html">gitlab-runner</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../gitlab-runner/main/index.html">main</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../grafana-helm/index.html">grafana-helm</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../grafana-helm/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../home-assistant/index.html">Home Assistant</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../home-assistant/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../keycloak/index.html">keycloak</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../keycloak/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../kubevirt-manager/index.html">KubeVirt Manager</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../kubevirt-manager/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lieutenant/index.html">Lieutenant</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lieutenant/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../machine-api-provider-cloudscale/index.html">machine-api-provider-cloudscale</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../machine-api-provider-cloudscale/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../namespaces/index.html">Managed Namespaces</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../namespaces/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../metallb/index.html">MetalLB</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../metallb/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mimir/index.html">mimir</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mimir/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../minio/index.html">minio</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../minio/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../package-monitoring/index.html">monitoring</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../package-monitoring/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../networkpolicy/index.html">NetworkPolicy</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../networkpolicy/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-nodes/index.html">OpenShift 4 Nodes</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-nodes/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift-upgrade-controller/index.html">openshift-upgrade-controller</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift-upgrade-controller/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-console/index.html">OpenShift4 Console</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-console/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-logging/index.html">OpenShift4 Logging</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-logging/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-monitoring/index.html">OpenShift4 Monitoring</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-monitoring/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-scheduling/index.html">OpenShift4 Scheduler</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-scheduling/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-config/index.html">openshift4-config</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-config/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">openshift4-local-storage</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-operators/index.html">openshift4-operators</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-operators/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-slos/index.html">openshift4-slos</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-slos/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-terraform/index.html">openshift4-terraform</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-terraform/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../podsecuritypolicy/index.html">podsecuritypolicy</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../podsecuritypolicy/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../prometheus/index.html">prometheus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../prometheus/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../rook-ceph/index.html">Rook Ceph</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../rook-ceph/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../steward/index.html">Steward</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../steward/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../storageclass/index.html">StorageClass</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../storageclass/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../thanos/index.html">Thanos</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../thanos/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../topolvm/index.html">topolvm</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../topolvm/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../traefik/index.html">Traefik Proxy</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../traefik/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../vault/index.html">vault</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vault/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../vcluster/index.html">vcluster</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vcluster/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../vertical-pod-autoscaler/index.html">vertical-pod-autoscaler</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vertical-pod-autoscaler/index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../hub/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">openshift4-local-storage</a></li>
    <li><a href="parameters.html">Parameters</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/appuio/component-openshift4-local-storage/edit/master/docs/modules/ROOT/pages/references/parameters.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Parameters</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The parent key for all of the following parameters is <code>openshift4_local_storage</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Kapitan secret references are not supported in this component.
If you need to change this behavior, please create a PR to adjust the ArgoCD app in <code>component/app.jsonnet</code> accordingly.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_namespace"><a class="anchor" href="#_namespace"></a><code>namespace</code></h2>
<div class="sectionbody">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
type
</td>
<td class="hdlist2">
<p>string</p>
</td>
</tr>
<tr>
<td class="hdlist1">
default
</td>
<td class="hdlist2">
<p><code>openshift-local-storage</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The namespace in which to deploy this component.
Defaults to the suggested namespace for the RedHat Local Storage operator.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_local_storage_operator_channel"><a class="anchor" href="#_local_storage_operator_channel"></a><code>local_storage_operator.channel</code></h2>
<div class="sectionbody">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
type
</td>
<td class="hdlist2">
<p>string</p>
</td>
</tr>
<tr>
<td class="hdlist1">
default
</td>
<td class="hdlist2">
<p><code>stable</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The subscription channel to use when installing the Local Storage Operator using the Operator Lifecycle Manager.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_local_volumes"><a class="anchor" href="#_local_volumes"></a>local_volumes</h2>
<div class="sectionbody">
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
type
</td>
<td class="hdlist2">
<p>dict</p>
</td>
</tr>
<tr>
<td class="hdlist1">
keys
</td>
<td class="hdlist2">
<p>names of <code>LocalVolume</code> resources to create</p>
</td>
</tr>
<tr>
<td class="hdlist1">
values
</td>
<td class="hdlist2">
<p>dicts with keys</p>
<div class="ulist">
<ul>
<li>
<p><code>config</code> (mandatory)</p>
</li>
<li>
<p><code>restricted_to</code> (optional)</p>
</li>
<li>
<p><code>storage_class_devices</code> (mandatory)</p>
</li>
</ul>
</div>
</td>
</tr>
<tr>
<td class="hdlist1">
default
</td>
<td class="hdlist2">
<p><code>{}</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The component will render a <code>LocalVolume</code> resource for each entry in the dict.</p>
</div>
<div class="sect2">
<h3 id="_key_config"><a class="anchor" href="#_key_config"></a>Key <code>config</code></h3>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
type
</td>
<td class="hdlist2">
<p>dict</p>
</td>
</tr>
<tr>
<td class="hdlist1">
keys
</td>
<td class="hdlist2">
<p><code>nodeSelector</code>, <code>tolerations</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The value of key <code>config</code> of the entry is used as the base for field <code>.spec</code> of the <code>LocalVolume</code> resource.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The component overwrites key <code>.spec.storageClassDevices</code> based on key <a href="#_key_storage_class_devices"><code>storage_class_devices</code></a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See the OpenShift documentation for the Local Storage Operator for possible configurations for</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.openshift.com/container-platform/latest/storage/persistent_storage/persistent-storage-local.html#local-volume-cr_persistent-storage-local">field <code>nodeSelector</code></a></p>
</li>
<li>
<p><a href="https://docs.openshift.com/container-platform/latest/storage/persistent_storage/persistent-storage-local.html#local-tolerations_persistent-storage-local">field <code>tolerations</code></a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_key_storage_class_devices"><a class="anchor" href="#_key_storage_class_devices"></a>Key <code>storage_class_devices</code></h3>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
type
</td>
<td class="hdlist2">
<p>dict</p>
</td>
</tr>
<tr>
<td class="hdlist1">
keys
</td>
<td class="hdlist2">
<p>used as value for field <code>storageClassName</code> in resulting array elements</p>
</td>
</tr>
<tr>
<td class="hdlist1">
values
</td>
<td class="hdlist2">
<p>dicts with keys <code>volumeMode</code>, <code>fsType</code>, <code>devicePaths</code></p>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Each entry in <code>storage_class_devices</code> is transformed into an array element as shown below.</p>
</div>
<div class="paragraph">
<p>Given the <code>storage_class_devices</code> specification shown on the left, the <code>LocalVolume</code> resource on the right is created by the component.</p>
</div>
<table class="tableblock frame-all grid-none stretch">
<colgroup>
<col style="width: 42.8571%;">
<col style="width: 4.7619%;">
<col style="width: 52.381%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock">
<div class="title">Config in hierarchy</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">storage_class_devices:
  localstorage:
    volumeMode: Block
    devicePaths:
      - /dev/vdb</code></pre>
</div>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="paragraph">
<p><span style="font-size: 200%">&#8658;</span></p>
</div></div></td>
<td class="tableblock halign-left valign-middle"><div class="content"><div class="listingblock">
<div class="title">Resulting <code>LocalVolume</code> resource</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion:
kind: LocalVolume
metdata:
  name: ... # omitted
spec:
  storageClassDevices:
    - storageClassName: localstorage
      volumeMode: Block
      devicePaths:
        - /dev/vdb
  # remaining spec omitted</code></pre>
</div>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Given this <code>LocalVolume</code> resource, the operator creates</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A single <code>StorageClass</code> for each key in <code>storage_class_devices</code></p>
</li>
<li>
<p>PVs making <code>/dev/vdb</code> available.
One such PV is created per node which is matched by the node selector in <code>.spec.nodeSelector</code> of the <code>LocalVolume</code> object (omitted in the example)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See <a href="https://docs.openshift.com/container-platform/latest/storage/persistent_storage/persistent-storage-local.html#local-volume-cr_persistent-storage-local">the OpenShift documentation</a> for an explanation of the valid fields in values of dict <code>storage_class_devices</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_key_restricted_to"><a class="anchor" href="#_key_restricted_to"></a>Key <code>restricted_to</code></h3>
<div class="hdlist">
<table>
<tr>
<td class="hdlist1">
type
</td>
<td class="hdlist2">
<p>dict</p>
</td>
</tr>
<tr>
<td class="hdlist1">
keys
</td>
<td class="hdlist2">
<p>namespace labels</p>
</td>
</tr>
<tr>
<td class="hdlist1">
values
</td>
<td class="hdlist2">
<p>one of</p>
<div class="ulist">
<ul>
<li>
<p>empty dict (<code>{}</code>)</p>
</li>
<li>
<p>dict with key <code>values</code></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If this key is present, the component creates an Espejo <code>SyncConfig</code> to restrict the use of the storage classes created by the <code>LocalVolume</code> resource.</p>
</div>
<div class="paragraph">
<p>This restriction is implemented with <code>ResourceQuota</code> resources which give a quota of 0 PVCs for the storage classes.
With this <code>ResourceQuota</code> configuration, the resource quota must be configured in all namespaces other than the ones that are allowed to use the storage class.
Therefore, the component must to invert the given restrictions to correctly restrict usage of the storage class to the specified namespaces.</p>
</div>
<div class="paragraph">
<p>The content of the key is expected to be a dict, with keys in the dict corresponding to labels on namespaces.</p>
</div>
<div class="paragraph">
<p>The values of the dict can be</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Empty dicts (<code>{}</code>).
In this case, the component constructs the following namespace selector <code>matchExpressions</code> entry:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">namespaceSelector:
  labelSelector:
    matchExpressions:
      - key: &lt;KEY&gt; <i class="conum" data-value="1"></i><b>(1)</b>
        operator: DoesNotExist <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The key in the <code>restricted_to</code> dict is used as value for field <code>key</code> in the match expression</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>ResourceQuota</code> needs to be present in all namespaces which don&#8217;t have the label <code>&lt;KEY&gt;</code>.</td>
</tr>
</table>
</div>
</li>
<li>
<p>Dicts with key <code>values</code>.
In this case, the component constructs the following namespace selector <code>matchExpressions</code> entry:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">namespaceSelector:
  labelSelector:
    matchExpressions:
      - key: &lt;KEY&gt; <i class="conum" data-value="1"></i><b>(1)</b>
        operator: NotIn <i class="conum" data-value="2"></i><b>(2)</b>
        values: &lt; restricted_to[KEY].values &gt; <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The key in the <code>restricted_to</code> dict is used as value for field <code>key</code> in the match expression</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <code>ResourceQuota</code> needs to be present in all namespaces which don&#8217;t have the label <code>&lt;KEY&gt;</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The contents of field <code>values</code>.</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example_configuration"><a class="anchor" href="#_example_configuration"></a>Example configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This example configuration shows how to present device <code>/dev/vdb</code> on all nodes with label <code>node-role.kubernetes.io/storage</code> as a PV with <code>volumeMode=Block</code> and storage class <code>localblock-storage</code>.</p>
</div>
<div class="paragraph">
<p>The example restricts the use of the resulting storage class <code>localblock-storage</code> to namespaces labelled with <code>argocd.argoproj.io/instance=rook-ceph</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">parameters:
  openshift4_local_storage:
    local_volumes:
      # Create a `LocalVolume` resource named `storagevolumes`
      storagevolumes:
        # Restrict usage of the resulting storage class to namespaces
        # labelled with `argocd.argoproj.io/instance=rook-ceph`.
        restricted_to:
          argocd.argoproj.io/instance:
            values:
              - rook-ceph
        # Present `/dev/vdb` on nodes selected by the node selector
        # (see below) as PV with `volumeMode=Block` and storage class
        # `localblock-storage`
        storage_class_devices:
          localblock-storage:
            volumeMode: Block
            devicePaths:
              - /dev/vdb
        config:
          # Ensure the resulting manager pods can run on nodes tainted
          # with `storagenode=True:NoSchedule`
          tolerations:
            - key: storagenode
              operator: Exists
          # Restrict resulting pods to nodes with label
          # `node-role.kubernetes.io/storage`
          nodeSelector:
            nodeSelectorTerms:
              matchExpressions:
                - key: node-role.kubernetes.io/storage
                  operator: Exists</code></pre>
</div>
</div>
<div class="paragraph">
<p>This configuration for parameter <code>local_volumes</code> results in the following resources to apply to the cluster:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>LocalVolume</code> resource named <code>storagevolumes</code> which configures</p>
<div class="ulist">
<ul>
<li>
<p>a storage class named <code>localblock-storage</code></p>
</li>
<li>
<p>a PV for <code>/dev/vda5</code> with <code>storageClassName=localblock-storage</code> on each node which has the label <code>node-role.kubernetes.io/storage</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>A <code>SyncConfig</code> resource named <code>openshift4-local-storage-restrict-storagevolumes</code>
This <code>SyncConfig</code> ensures that the <code>ResourceQuota</code> restricting the PVC count for storage class <code>storagevolumes</code> to 0 is present in namespaces without the label <code>argocd.argoproj.io/instance=rook-ceph</code>.</p>
</li>
<li>
<p>A <code>SyncConfig</code> resource named <code>openshift4-local-storage-restrict-storagevolumes-prune</code>
This <code>SyncConfig</code> ensures that the <code>ResourceQuota</code> restricting the PVC count for storage class <code>storagevolumes</code> to 0 is removed in namespaces with the label <code>argocd.argoproj.io/instance=rook-ceph</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="../index.html">Home</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright © VSHN 2021 – All Rights Reserved. <a href="https://vshn.ch/en/privacy-policy/">Privacy Policy</a>, <a href="https://vshn.ch/en/imprint/">Imprint</a>, and <a href="https://vshn.ch/en/contact/">Contact</a>.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/vendor/search.js" id="search-script" data-base-path="../.." data-page-path="/openshift4-local-storage/references/parameters.html"></script>
<script async src="../../_/../search-index.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
  </body>
</html>
