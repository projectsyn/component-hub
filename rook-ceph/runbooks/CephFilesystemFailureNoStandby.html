<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Alert rule: CephFilesystemFailureNoStandby :: Commodore Hub</title>
    <link rel="canonical" href="https://hub.syn.tools/rook-ceph/runbooks/CephFilesystemFailureNoStandby.html">
    <link rel="prev" href="CephPoolNearFull.html">
    <link rel="next" href="CephFilesystemInsufficientStandby.html">
    <meta name="generator" content="Antora 2.3.4">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-54393406-10"></script>
    <script>function gtag(){dataLayer.push(arguments)};window.dataLayer=window.dataLayer||[];gtag('js',new Date());gtag('config','UA-54393406-10')</script>
    <script>var uiRootPath = '../../_'</script>
    <script type="text/javascript" id="hs-script-loader" async defer src="//js.hs-scripts.com/7105834.js"></script>
<link rel="apple-touch-icon" sizes="180x180" href="/_/img/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/_/img/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/_/img/favicon-16x16.png">
<link rel="mask-icon" href="/_/img/safari-pinned-tab.svg" color="#5bbad5">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <div class="syn_logo"></div>
        <a href="https://hub.syn.tools">Commodore Hub
          </a>
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Tools</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://syn.tools/commodore/">Commodore</a>
            <a class="navbar-item" href="https://hub.syn.tools/" target="_blank" >Commodore Components Hub</a>
            <a class="navbar-item" href="https://syn.tools/lieutenant-api/">Lieutenant API</a>
            <a class="navbar-item" href="https://syn.tools/lieutenant-operator/">Lieutenant Operator</a>
            <a class="navbar-item" href="https://syn.tools/steward/">Steward</a>
            <a class="navbar-item" href="https://k8up.io/" target="_blank">K8up</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">
            <div class="vshn-unified-logo"></div>
          </a>
          <div class="navbar-dropdown">
            <a class="navbar-item" target="_blank" href="https://www.vshn.ch/">Main website</a>
            <a class="navbar-item" target="_blank" href="https://handbook.vshn.ch/">Handbook</a>
            <a class="navbar-item" target="_blank" href="https://kb.vshn.ch/">Knowledge Base</a>
            <a class="navbar-item" target="_blank" href="https://products.docs.vshn.ch/">Products</a>
            <a class="navbar-item" target="_blank" href="https://legal.docs.vshn.ch/">Legal</a>
            <a class="navbar-item" target="_blank" href="https://control.docs.vshn.ch/">Portal Help</a>
            <a class="navbar-item" target="_blank" href="https://docs.appuio.ch/">APPUiO Documentation</a>
          </div>
        </div>
        <div class="navbar-item">
          <div class="search-field">
            <input id="search-input" class="search-input" type="search" placeholder="Search">
            <button type="submit" class="search-button">
              <i class="fa fa-search"></i>
            </button>
          </div>
        </div>
        <div class="navbar-item">
          <a class="navbar-item" href="https://github.com/projectsyn/" target="_blank"><i
              class="fa fa-github" style="font-size: 30px;"></i>&nbsp;
            GitHub</a>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="rook-ceph" data-version="master">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../index.html">Rook Ceph</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Home</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tutorials</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../tutorials/quick-start.html">Quick start</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">How-to guides</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/openshift4.html">Configuring the component for OpenShift 4</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/setup-cluster.html">Setup a PVC-based Ceph cluster</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/scale-cluster.html">Scale a PVC-based Ceph cluster</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/configure-ceph.html">Configuring and tuning Ceph</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/upgrade-ceph-csi-v3.9.html">Upgrading to Ceph-CSI v3.9.0</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Alert runbooks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../how-tos/add_alert_runbook.html">Adding a new alert runbook</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Rook-Ceph operator</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="RookCephOperatorScaledDown.html">RookCephOperatorScaledDown</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph Cluster</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephDaemonCrash.html">CephDaemonCrash</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephHealthError.html">CephHealthError</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephHealthWarning.html">CephHealthWarning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephNodeDiskspaceWarning.html">CephNodeDiskspaceWarning</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephNodeInconsistentMTU.html">CephNodeInconsistentMTU</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephNodeNetworkBondDegraded.html">CephNodeNetworkBondDegraded</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephNodeNetworkPacketDrops.html">CephNodeNetworkPacketDrops</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephNodeNetworkPacketErrors.html">CephNodeNetworkPacketErrors</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephNodeRootFilesystemFull.html">CephNodeRootFilesystemFull</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPGBackfillAtRisk.html">CephPGBackfillAtRisk</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPGImbalance.html">CephPGImbalance</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPGNotDeepScrubbed.html">CephPGNotDeepScrubbed</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPGNotScrubbed.html">CephPGNotScrubbed</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPGRecoveryAtRisk.html">CephPGRecoveryAtRisk</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPGUnavailableBlockingIO.html">CephPGUnavailableBlockingIO</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPGsDamaged.html">CephPGsDamaged</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPGsHighPerOSD.html">CephPGsHighPerOSD</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPGsInactive.html">CephPGsInactive</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPGsUnclean.html">CephPGsUnclean</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephSlowOps.html">CephSlowOps</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph pools</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPoolBackfillFull.html">CephPoolBackfillFull</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPoolFull.html">CephPoolFull</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephPoolNearFull.html">CephPoolNearFull</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph MDS</span>
<ul class="nav-list">
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="CephFilesystemFailureNoStandby.html">CephFilesystemFailureNoStandby</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephFilesystemInsufficientStandby.html">CephFilesystemInsufficientStandby</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephFilesystemMDSRanksLow.html">CephFilesystemMDSRanksLow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephFilesystemOffline.html">CephFilesystemOffline</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephFilesystemReadOnly.html">CephFilesystemReadOnly</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph MGR</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephMgrModuleCrash.html">CephMgrModuleCrash</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephMgrPrometheusModuleInactive.html">CephMgrPrometheusModuleInactive</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph MON</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephMonDiskspaceCritical.html">CephMonDiskspaceCritical</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephMonDiskspaceLow.html">CephMonDiskspaceLow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephMonDown.html">CephMonDown</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephMonDownQuorumAtRisk.html">CephMonDownQuorumAtRisk</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph OSD</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDBackfillFull.html">CephOSDBackfillFull</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDDown.html">CephOSDDown</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDDownHigh.html">CephOSDDownHigh</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDFlapping.html">CephOSDFlapping</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDFull.html">CephOSDFull</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDHostDown.html">CephOSDHostDown</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDInternalDiskSizeMismatch.html">CephOSDInternalDiskSizeMismatch</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDNearFull.html">CephOSDNearFull</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDReadErrors.html">CephOSDReadErrors</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDTimeoutsClusterNetwork.html">CephOSDTimeoutsClusterNetwork</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDTimeoutsPublicNetwork.html">CephOSDTimeoutsPublicNetwork</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephOSDTooManyRepairs.html">CephOSDTooManyRepairs</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephObjectMissing.html">CephObjectMissing</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">CephFS</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephFilesystemDamaged.html">CephFilesystemDamaged</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephFilesystemDegraded.html">CephFilesystemDegraded</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Ceph devices</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephDeviceFailurePredicted.html">CephDeviceFailurePredicted</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephDeviceFailurePredictionTooHigh.html">CephDeviceFailurePredictionTooHigh</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="CephDeviceFailureRelocationIncomplete.html">CephDeviceFailureRelocationIncomplete</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Technical reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../references/parameters.html">Parameters</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Rook Ceph</span>
    <span class="version">master</span>
  </div>
  <ul class="components">
    <li class="component">
      <a class="title" href="../../acme-dns/index.html">acme-dns</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../acme-dns/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../adhoc-configurations/index.html">adhoc-configurations</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../adhoc-configurations/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../appcat/index.html">appcat</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../appcat/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../appcat-service-postgresql/index.html">appcat-service-postgresql</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../appcat-service-postgresql/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../control-api/index.html">APPUiO Control API</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../control-api/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../appuio-cloud/index.html">appuio-cloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../appuio-cloud/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../appuio-cloud-reporting/index.html">appuio-cloud-reporting</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../appuio-cloud-reporting/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../appuio-reporting/index.html">appuio-reporting</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../appuio-reporting/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../argocd/index.html">Argo CD</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../argocd/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../aws-cloudwatch-metrics/index.html">aws-cloudwatch-metrics</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../aws-cloudwatch-metrics/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../backup-k8up/index.html">backup-k8up</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../backup-k8up/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../billing-collector-cloudservices/index.html">billing-collector-cloudservices</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../billing-collector-cloudservices/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cert-exporter/index.html">cert-exporter</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cert-exporter/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cert-manager/index.html">cert-manager</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cert-manager/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cilium/index.html">Cilium</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cilium/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cloud-portal/index.html">cloud-portal</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cloud-portal/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cluster-backup/index.html">Cluster Backup</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cluster-backup/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cluster-autoscaler/index.html">cluster-autoscaler</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cluster-autoscaler/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cm-hetznercloud/index.html">CM Hetznercloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cm-hetznercloud/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cockroach-operator/index.html">CockroachDB Operator</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cockroach-operator/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../hub/index.html">Commodore Hub</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../hub/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../coredns/index.html">CoreDNS</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../coredns/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../cortex-tenant-ns-label/index.html">cortex-tenant-ns-label</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../cortex-tenant-ns-label/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../crossplane/index.html">crossplane</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../crossplane/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../csi-driver-smb/index.html">CSI driver SMB</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../csi-driver-smb/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../csi-exoscale/index.html">CSI Exoscale</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../csi-exoscale/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../csi-hetznercloud/index.html">CSI Hetznercloud</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../csi-hetznercloud/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../csi-cloudscale/index.html">csi-cloudscale</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../csi-cloudscale/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../emergency-credentials-controller/index.html">emergency-credentials-controller</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../emergency-credentials-controller/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../espejo/index.html">espejo</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../espejo/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../eventrouter/index.html">eventrouter</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../eventrouter/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../exporter-filterproxy/index.html">exporter-filterproxy</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../exporter-filterproxy/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../fleetlock/index.html">Fleetlock</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../fleetlock/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../floodgate/index.html">floodgate</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../floodgate/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../fluentbit/index.html">fluentbit</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../fluentbit/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../fluentd-forwarder/main/index.html">Fluentd Forwarder</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../fluentd-forwarder/main/index.html">main</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../gitlab-runner/main/index.html">gitlab-runner</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../gitlab-runner/main/index.html">main</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../grafana-helm/index.html">grafana-helm</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../grafana-helm/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../grafana-organizations-operator/index.html">grafana-organizations-operator</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../grafana-organizations-operator/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../group-sync-operator/index.html">Group Sync Operator</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../group-sync-operator/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../ingress-nginx/index.html">ingress-nginx</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../ingress-nginx/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../json-exporter/index.html">json-exporter</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../json-exporter/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../keycloak/index.html">keycloak</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../keycloak/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../keycloak-attribute-sync-controller/index.html">Keycloak Attribute Sync Controller</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../keycloak-attribute-sync-controller/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../metrics-server/index.html">Kubernetes Metrics Server</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../metrics-server/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../kyverno/index.html">kyverno</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../kyverno/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../lieutenant/index.html">Lieutenant</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../lieutenant/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../machineset-egress-cidr-operator/index.html">machineset-egress-cidr-operator</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../machineset-egress-cidr-operator/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../metallb/index.html">MetalLB</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../metallb/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../mimir/index.html">mimir</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../mimir/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../minio/index.html">minio</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../minio/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../package-monitoring/index.html">monitoring</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../package-monitoring/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../networkpolicy/index.html">NetworkPolicy</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../networkpolicy/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../nfs-subdir-external-provisioner/index.html">nfs-subdir-external-provisioner</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../nfs-subdir-external-provisioner/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-authentication/index.html">OpenShift 4 Authentication</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-authentication/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-ingress/index.html">Openshift 4 Ingress</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-ingress/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-nodes/index.html">OpenShift 4 Nodes</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-nodes/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-registry/index.html">OpenShift 4 Registry</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-registry/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-version/index.html">OpenShift 4 Version</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-version/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift-upgrade-controller/index.html">openshift-upgrade-controller</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift-upgrade-controller/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-console/index.html">OpenShift4 Console</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-console/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-dns/index.html">Openshift4 DNS</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-dns/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-logging/index.html">OpenShift4 Logging</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-logging/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-monitoring/index.html">OpenShift4 Monitoring</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-monitoring/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-scheduling/index.html">OpenShift4 Scheduler</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-scheduling/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-splunk-forwarder/index.html">Openshift4 Splunk Forwarder</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-splunk-forwarder/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-api/index.html">openshift4-api</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-api/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-config/index.html">openshift4-config</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-config/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-keepalived/index.html">openshift4-keepalived</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-keepalived/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-local-storage/index.html">openshift4-local-storage</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-local-storage/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-networking/index.html">openshift4-networking</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-networking/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-operators/index.html">openshift4-operators</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-operators/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-proxy/index.html">openshift4-proxy</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-proxy/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-service-mesh/index.html">openshift4-service-mesh</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-service-mesh/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-slos/index.html">openshift4-slos</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-slos/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-terraform/index.html">openshift4-terraform</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-terraform/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../patch-operator/index.html">patch-operator</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../patch-operator/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../podsecuritypolicy/index.html">podsecuritypolicy</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../podsecuritypolicy/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../prom-label-proxy/index.html">prom-label-proxy</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../prom-label-proxy/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../prometheus/index.html">prometheus</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../prometheus/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../prometheus-pushgateway/index.html">Prometheus Pushgateway</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../prometheus-pushgateway/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../rancher-monitoring/index.html">rancher-monitoring</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../rancher-monitoring/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../registry-cache/index.html">registry-cache</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../registry-cache/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component is-current">
      <a class="title" href="../index.html">Rook Ceph</a>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../openshift4-s3-forwarder/index.html">S3 Forwarder</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../openshift4-s3-forwarder/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../secret-generator/index.html">secret-generator</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../secret-generator/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../signalilo/index.html">signalilo</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../signalilo/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../statefulset-resize-controller/index.html">statefulset-resize-controller</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../statefulset-resize-controller/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../steward/index.html">Steward</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../steward/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../storageclass/index.html">StorageClass</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../storageclass/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../system-upgrade-controller/index.html">system-upgrade-controller</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../system-upgrade-controller/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../topolvm/index.html">topolvm</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../topolvm/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../traefik/index.html">Traefik Proxy</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../traefik/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../vault/index.html">vault</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vault/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../vcluster/index.html">vcluster</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vcluster/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../vertical-pod-autoscaler/index.html">vertical-pod-autoscaler</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../vertical-pod-autoscaler/index.html">master</a>
        </li>
      </ul>
    </li>
    <li class="component">
      <a class="title" href="../../xelon-csi/index.html">xelon-csi</a>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../../xelon-csi/index.html">master</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../hub/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Rook Ceph</a></li>
    <li>Alert runbooks</li>
    <li>Ceph MDS</li>
    <li><a href="CephFilesystemFailureNoStandby.html">CephFilesystemFailureNoStandby</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="https://github.com/projectsyn/component-rook-ceph/edit/master/docs/modules/ROOT/pages/runbooks/CephFilesystemFailureNoStandby.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Alert rule: CephFilesystemFailureNoStandby</h1>
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Please consider opening a PR to improve this runbook if you gain new information about causes of the alert, or how to debug or resolve the alert.
Click "Edit this Page" in the top right corner to create a PR directly on GitHub.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview"><a class="anchor" href="#_overview"></a><span class="icon"><i class="fa fa-glasses"></i></span> Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An MDS daemon has failed, leaving only one active rank without further standby.
Investigate the cause of the failure or add a standby daemon.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_steps_for_debugging"><a class="anchor" href="#_steps_for_debugging"></a><span class="icon"><i class="fa fa-bug"></i></span> Steps for debugging</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_check_cephfs_mds_pods"><a class="anchor" href="#_check_cephfs_mds_pods"></a>Check CephFS MDS pods</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ceph_cluster_ns=syn-rook-ceph-cluster
$ kubectl -n "${ceph_cluster_ns}" get pods -lapp=rook-ceph-mds</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_check_cephfs_status"><a class="anchor" href="#_check_cephfs_status"></a>Check CephFS status</h3>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ceph_cluster_ns=syn-rook-ceph-cluster
$ kubectl -n "${ceph_cluster_ns}" exec -it deploy/rook-ceph-tools -- ceph fs status
fspool - 0 clients <i class="conum" data-value="1"></i><b>(1)</b>
======
RANK      STATE         MDS        ACTIVITY     DNS    INOS   DIRS   CAPS <i class="conum" data-value="2"></i><b>(2)</b>
 0        active      fspool-a  Reqs:    0 /s  1237    308    307      0  <i class="conum" data-value="2"></i><b>(2)</b>
0-s   standby-replay  fspool-b  Evts:    0 /s  1601    306    305      0  <i class="conum" data-value="2"></i><b>(2)</b>
      POOL         TYPE     USED  AVAIL <i class="conum" data-value="3"></i><b>(3)</b>
fspool-metadata  metadata  55.0M  83.8G <i class="conum" data-value="3"></i><b>(3)</b>
  fspool-data0     data       0   83.8G <i class="conum" data-value="3"></i><b>(3)</b>
MDS version: ceph version 16.2.6 (ee28fb57e47e9f88813e24bbf4c14496ca299d31) pacific (stable) <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Name of the filesystem and amount of connected clients</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>List of MDS replicas.
See the <a href="https://docs.ceph.com/en/latest/cephfs/mds-states/">Ceph documentation on MDS states</a> for more information about the values shown in the <code>STATE</code> column.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Filesystem metadata and data usage and remaining capacity.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Metadata server Ceph version</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If a Rook-managed Ceph upgrade goes wrong and leaves one of the MDS replicas in <code>CrashLoopBackOff</code> for too long the MDS cluster can go into state <code>failed</code>.
In that case, you should be able to recover the MDS cluster with the following commands:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
These commands may make the CephFS filesystem temporarily unavailable.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>First, get the filesystem into a state where you can promote one of the MDS replicas to <code>active</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ ceph_cluster_ns=syn-rook-ceph-cluster
$ cephfs_name=fspool <i class="conum" data-value="1"></i><b>(1)</b>
$ kubectl -n "${ceph_cluster_ns}" exec -it deploy/rook-ceph-tools -- ceph fs dump <i class="conum" data-value="2"></i><b>(2)</b>
[ ... truncated ... ]
Filesystem 'fspool' (1)
fs_name	fspool
[ ... truncated ... ]
max_mds	1 <i class="conum" data-value="2"></i><b>(2)</b>
in	0
up	{0=23899}
[ ... truncated ... ]
$ kubectl -n "${ceph_cluster_ns}" exec -it deploy/rook-ceph-tools -- ceph fs set "${cephfs_name}" allow_standby_replay false <i class="conum" data-value="3"></i><b>(3)</b>
$ kubectl -n "${ceph_cluster_ns}" exec -it deploy/rook-ceph-tools -- ceph fs set "${cephfs_name}" max_mds 1 <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Change to the name of the filesystem you want to recover</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Show filesystem status, and make a note of <code>max_mds</code> for your target filesystem.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Disable standby-replay MDS replicas. This allows safely restarting the MDS cluster.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>This is only required if <code>dump</code> showed <code>max_mds &gt; 1</code></td>
</tr>
</table>
</div>
</li>
<li>
<p>Check if one of the MDS replicas got promoted to <code>active</code> by the MONs.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ kubectl -n "${ceph_cluster_ns}" exec -it deploy/rook-ceph-tools -- ceph fs status</code></pre>
</div>
</div>
<div class="paragraph">
<p>If not, scale down all but one of the filesystem&#8217;s MDS replicas.
You may have to temporarily disable the rook-ceph operator to be able to scale down MDS replicas.
To disable the rook-ceph operator, you need to disable auto sync for the <code>root</code> and <code>rook-ceph</code> apps in ArgoCD and then scale the operator deployment to 0 replicas.</p>
</div>
</li>
<li>
<p>Once the filesystem is back to state <code>active</code>, enable standby replicas again</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-console hljs" data-lang="console">$ kubectl -n "${ceph_cluster_ns}" exec -it deploy/rook-ceph-tools -- ceph fs set "${cephfs_name}" allow_standby_replay true <i class="conum" data-value="1"></i><b>(1)</b>
$ kubectl -n "${ceph_cluster_ns}" exec -it deploy/rook-ceph-tools -- ceph fs set "${cephfs_name}" max_mds &lt;orig_max_mds&gt; <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Enable standby-replay MDS replicas for the filesystem</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>If your filesystem originally had <code>max_mds &gt; 1</code>, reconfigure it to have the original value of <code>max_mds</code>.</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_upstream_documentation"><a class="anchor" href="#_upstream_documentation"></a><span class="icon"><i class="fa fa-book"></i></span> Upstream documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://docs.ceph.com/en/latest/cephfs/health-messages/#fs-with-failed-mds" class="bare">docs.ceph.com/en/latest/cephfs/health-messages/#fs-with-failed-mds</a></p>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="CephPoolNearFull.html">CephPoolNearFull</a></span>
  <span class="next"><a href="CephFilesystemInsufficientStandby.html">CephFilesystemInsufficientStandby</a></span>
</nav>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>Copyright © VSHN 2021 – All Rights Reserved. <a href="https://vshn.ch/en/privacy-policy/">Privacy Policy</a>, <a href="https://vshn.ch/en/imprint/">Imprint</a>, and <a href="https://vshn.ch/en/contact/">Contact</a>.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/vendor/search.js" id="search-script" data-base-path="../.." data-page-path="/rook-ceph/runbooks/CephFilesystemFailureNoStandby.html"></script>
<script async src="../../_/../search-index.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none",
  tex2jax: {
    inlineMath: [["\\(", "\\)"]],
    displayMath: [["\\[", "\\]"]],
    ignoreClass: "nostem|nolatexmath"
  },
  asciimath2jax: {
    delimiters: [["\\$", "\\$"]],
    ignoreClass: "nostem|noasciimath"
  },
  TeX: { equationNumbers: { autoNumber: "none" } }
});
</script>
  </body>
</html>
